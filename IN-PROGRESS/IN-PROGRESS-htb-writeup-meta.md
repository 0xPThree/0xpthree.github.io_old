# how-to-meta.htb

![[Pasted image 20220131120135.png]]

# USER

### Step 1

**nmap:**
```bash
[root:~]# nmap -p- 10.10.11.140
PORT   STATE SERVICE
22/tcp open  ssh
80/tcp open  http

[root:~]# nmap -Pn -n -sCV -p22,80 10.10.11.140
PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 7.9p1 Debian 10+deb10u2 (protocol 2.0)
| ssh-hostkey: 
|   2048 12:81:17:5a:5a:c9:c6:00:db:f0:ed:93:64:fd:1e:08 (RSA)
|   256 b5:e5:59:53:00:18:96:a6:f8:42:d8:c7:fb:13:20:49 (ECDSA)
|_  256 05:e9:df:71:b5:9f:25:03:6b:d0:46:8d:05:45:44:20 (ED25519)
80/tcp open  http    Apache httpd
|_http-title: Did not follow redirect to http://artcorp.htb
|_http-server-header: Apache
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

[root:~]# nmap -sU --top-ports=20 --open 10.10.11.140
N/A
```

**dirb:**
```bash
+ http://10.10.11.140/index.php (CODE:301|SIZE:0)                                                                                            
+ http://10.10.11.140/server-status (CODE:403|SIZE:199) 

==> DIRECTORY: http://artcorp.htb/assets/                                                                                                    
==> DIRECTORY: http://artcorp.htb/css/                                                                                                       
+ http://artcorp.htb/index.html (CODE:200|SIZE:4427)                                                                                         
+ http://artcorp.htb/server-status (CODE:403|SIZE:199)    
+ http://artcorp.htb/assets/favicon.ico (CODE:200|SIZE:23462)                                                                                
==> DIRECTORY: http://artcorp.htb/assets/img/
```

**nikto:**
```bash
+ Server: Apache
+ Root page / redirects to: http://artcorp.htb
```

**ffuf:**
```bash
[root:~]# curl -s -H "Host: blajsi.artcorp.htb" http://artcorp.htb | wc -c
0

[root:~]# ffuf -c -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -u http://artcorp.htb -H "Host: FUZZ.artcorp.htb" -fs 0

dev01                   [Status: 200, Size: 247, Words: 16, Lines: 10]
```

The initial enumeration leads us to `http://dev01.artcorp.htb`, a small dev environment dedicated for ArtCorp's application MetaView. MetaView seems to be an application that analyzes metadata of images you upload. Maybe 

![[Pasted image 20220131125354.png]]

![[Pasted image 20220131125502.png]]

------------

### Step 2
Uploading a normal image to the application we get all the metadata.
![[Pasted image 20220131125938.png]]
Uploading a php-image shell, we find that the php code is presented accordingly.

![[Pasted image 20220131130218.png]]
![[Pasted image 20220131130138.png]]

Why? You can't run php directly from your browser, since PHP is a HTML preprocessor - your browser has nothing to do with PHP, it only gets the HTML that is generated by the server.

So because PHP tags are not valid in HTML files, when not preprocessed by the server, the browser doesn't recognise it, so it automatically converts it to comments since it doesn't know what else to do with it.

Safe to say, exiftool is not the way to go here. Instead we need to look for other ways to embed/inject payload to a image, and for this **`Pixload`** is great. 


-----------

### Step 2


--------------

# ROOT

### Step 1 


------

# References
**Pixload:**
https://github.com/chinarulezzz/pixload